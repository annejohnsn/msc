\section*{Ultrametric basics}


\begin{definition*}
	 Let $(M, \rho)$ be a metric space. If $\rho$ satistifies the ultrametric inequality
	\[\rho(x,z) \leq max{(\rho(x,y), \rho(y,z))}, \forall x,y,z \in M\] 
	then (M, $\rho$) is an \textbf{ultrametric space}.
\end{definition*}

\begin{definition*}
	 Let $(V, N)$ be a normed vector space. Then $N$ satisfies the \textbf{strong trianlge inequality} if
	\[N(x + y) \leq max(N(x), N(y)), \forall x,y \in V \]
\end{definition*}

\begin{proposition*}
	Let $(V,N)$ be a normed vector space and suppose $N$ satisfies the strong triangle inequality. Then the metric space, $(V,\rho_N)$, where $\rho_N$ is the metric induced by $N$, is an ultrametric space.
\end{proposition*}

\begin{proposition*}
	\cite{ar} All triangles in an ultrametric space $(M,\rho)$ are either equilateral or isocoles, with at most one short side. 
\end{proposition*}


\begin{proposition*}
\cite{ar} If $S$ is a compact subset of an ultrametric space and $\Gamma_S$ is the set of all distances occurring between points of $S$, then $\Gamma_S$ is a discrete subset of $\mathbb{R}$. In particular if $\mid \Gamma_S\mid = \infty$, then the elements of $\Gamma_S$ can be indexed by $\mathbb{N}$.
\end{proposition*}

\noindent Let $(M, \rho)$ be a compact ultrametric space and let \[B_r(a)=\{x \in M \mid \rho(x,a) < r\}\] denote the open ball of radius $r$, centred at $a$ for some $r \in \mathbb{R}_{\geq 0}$ and $a \in (M,\rho)$. Likewise let \[\overline{ B_r(a)}=\{x \in M \mid \rho(x,a) \leq r\}\]  denote the closed ball of radius $r$, centred at $a$ for some $r \in \mathbb{R}_{\geq 0}$ and $a \in (M,\rho)$.

\begin{proposition*}
	Let $B_r(a)$ be a ball in an ultrametric space $(M,\rho)$. Then the diameter of $B$, $d=diam(B)=\sup_{x,y \in B}{\rho(x,y)}$, is less than or equal to the radius of $B$.    
\end{proposition*}

\begin{proposition*}
	If $(M, \rho)$ is an ultrametric space and $B_{r_1}(x_0)$ and $B_{r_2}(y_0)$ are balls in $(M, \rho)$, then either $B_{r_1}(x_0) \cap B_{r_2}(y_0) = \emptyset$, $B_{r_1}(x_0) \subseteq B_{r_2}(y_0)$, or $B_{r_2}(x_0) \subseteq B_{r_1}(x_0)$. That is, in an ultrametric space, all balls are either comparable or disjoint.
\end{proposition*}

\begin{proposition*}
\cite{ar} The distance between any two balls in an ultrametric is constant. That is, if $B_{r_1}(x_0)$ and $B_{r_2}(y_0)$ are two balls in an ultrametric space $(M,\rho)$, then $\rho(x,y)=c$ for some $c \in \mathbb{R}$ and $\forall x \in B_{r_1}(x_0)$ and $\forall y \in B_{r_2}(y_0)$
\end{proposition*}

\begin{proposition*}
\cite{ar} Every point of a ball in an ultrametric is at its centre. That is, if $B_r(x_0)$ is a ball in an ultrametric space $(M,\rho)$, then $B_r(x)=B_r(x_0)$,  $\forall x \in B_r(x_0)$
\end{proposition*}


\newpage
\section*{$\rho$-orderings, $\rho$-sequences, and valuative capacity}

In what follows let $S$ be a compact subset of an ultrametric space $(M,\rho)$.

\begin{definition*}
	\cite{kj} A \textbf{$\rho$-ordering} of $S$ is a sequence $\{a_i\}_{i=0}^\infty \subseteq S$ such that $\forall n > 0$, $a_n$ maximizes $\prod_{i=0}^{n-1} \rho(s,a_i)$ over $s \in S$. 
\end{definition*}

\begin{definition*}
	\cite{kj} The \textbf{$\rho$-sequence} of $S$ is the sequence whose $0^{th}$-term is $1$ and whose $n^{th}$ term, for $n >0$, is $\prod_{i=o}^{n-1} \rho(a_n,a_i)$.
\end{definition*}

\begin{proposition*}
	\cite{kj} The $\rho$-sequence of $S$ is well-defined so long as $S$ is compact and $\rho$ is an ultrametric. That is, the $\rho$-sequence of a compact subset of an ultrametric spaces does not depend on the choice of $\rho$-ordering of $S$.
\end{proposition*}

\begin{definition*}
	\cite{kj}  Let $\gamma(n)$ be the $\rho$-sequence of $S$. The \textbf{valuative capacity} of $S$ is \[\omega(S)
	:= \lim_{n\to\infty} \gamma(n)^{1/n}\]  
\end{definition*}


\begin{proposition*}
	\cite{kj} For $S$ and $\gamma(n)$ as above,  $\lim_{n\to\infty} \gamma(n)^{1/n} = r < \infty$. 
\end{proposition*}


\begin{proposition*}
	If $S \subseteq M$ is a finite subset of an ultrametric space, then $\omega(S) =0$.
\end{proposition*}


\begin{proposition*}
	(upper bound) If $diam(S)  := \max_{x,y \in S} \rho(x,y)= d$, then $\omega(S) < d$.
\end{proposition*}

\begin{proof}
	Since $d$ is the diameter of $S$, the $n^{th}$ term of the $\rho$-sequence of $S$ is bounded by $d^n$ and so $ \lim_{n\to\infty} \gamma(n)^{1/n}=d$ if and only if $\gamma(n)=d^n$, $\forall n$. This implies $\rho(a_n, a_i) = d$, $\forall n$ and $\forall i < n$, but then $\rho(a_i,a_j)=d$, $\forall i,j$, since the $\rho$-sequence is maximized at each $n$. This means $\omega(S) < d$ would imply that the cover of $S$, $\cup_{a_i} B_d(a_i)$ is in fact an infinite partition, contradicting the compactness of $S$. Then  $\omega(S)= \lim_{n\to\infty} \gamma(n)^{1/n}<d$. 
\end{proof}

This doesn't work because  $\cup_{a_i} B_d(a_i)$  could fail to be a cover -when does this happen


\begin{proposition*}
	(translation invariance) Let $(M, \rho)$ be a compact ultrametric space and suppose $M$ is also a topological group. If $\rho$ is (left) invariant under the group operation, then so is $\omega$. That\ is, if $\rho(x,y)=\rho(gx,gy)$, $ \forall g,x,y \in M$, then $\omega(gS)=\omega(S)$, for $S \subseteq M$.	
\end{proposition*}

\begin{proof}
	Let $\{a_i\}_{i=0}^\infty$ be a $\rho$-ordering for $S$. Then $\{ga_i\}_{i=0}^\infty$ is a $\rho$-ordering for $gS$. Then $$\omega(gS) = \lim_{n\to\infty} \gamma(n)^{1/n} =  \lim_{n\to\infty} [\prod_{i=0}^{n-1} \rho(ga_n,ga_i)]^{1/n} = \lim_{n\to\infty} [\prod_{i=0}^{n-1} \rho(a_n,a_i)]^{1/n}	 = \omega(S)$$
\end{proof}	

\begin{example}
	With the notation of the previous section, note that for $x,y \in (\mathbb{Z}_p, \mid \cdot \mid_p)$, $\rho_p(x,y) = \mid x - y \mid_p = p^{-\nu_p(x-y)} = p^{-\nu_p((a+x)-(a+y))} =  \mid (a+x) - (a+y) \mid_p = \rho_p(a+x,a+y)$ so that $\omega(a+S) = \omega(S)$ for $S \in (\mathbb{Z}_p, \mid \cdot \mid_p)$.
\end{example}

\begin{proposition*}
	Let $(V, N)$ be a normed vector space and suppose $N$ satisfies the strong triangle identity. Then if $N$ is multiplicative, so is $\omega$. That is, if $N(gx)=N(g)N(x)$,$\forall g,x \in V$, then $\omega(gS) = N(g)  \omega(S)$, for $g \in V$ and $S \subseteq M$. 
\end{proposition*}

\begin{proof}
	Let $\rho$ be the metric induced by $N$, so that $\rho(x,y) = N(x-y), \forall x,y \in V$. Let $\{a_i\}_{i=0}^\infty$ be a $\rho$-ordering for $S$. Then since $N$ is multiplicative, for $u, v \in gS$, $u=gs_i$ and $v=gs_j$ for some $s_i, s_j \in S$,  $$\rho(u, v) = \rho(gs_i, gs_j) =N(gs_i - gs_j) = N(g(s_i - s_j)) = N(g)N(s_i - s_j) = N(g)\rho(s_i,s_j).$$
	Then $\{ga_i\}_{i=0}^\infty$ is a $\rho$-ordering for $gS$ and 
	
	$$\omega(gS) = \lim_{n\to\infty} [\prod_{i=0}^{n-1} \rho(ga_n,ga_i)]^{1/n} 
	= \lim_{n\to\infty} [\prod_{i=0}^{n-1} N(g)\rho(a_n,a_i)]^{1/n} $$
	$$= \lim_{n\to\infty} [N(g)^n\prod_{i=0}^{n-1} \rho(a_n,a_i)]^{1/n} = N(g) \lim_{n\to\infty} [\prod_{i=0}^{n-1} \rho(a_n,a_i)]^{1/n} = N(g) \omega(S)$$
\end{proof}


\begin{example}
	Since $\mid \cdot \mid_p$ is multiplicative, $\omega(mS) = \mid m \mid_p  \omega(S)$ for $m \in \mathbb{Z}_p$ and $S \subseteq \mathbb{Z}$. In particular, $\omega(p\mathbb{Z}) = \mid p \mid_p \omega(\mathbb{Z}) = \frac{1}{p}*p^{\frac{1}{1-p}} = p^{-p/p-1}.$
\end{example}


\begin{proposition*}
	\cite{kj}(subadditivity) If  $diam(S) := \max_{x,y \in S} \rho(x,y)=d$ and $S=\cup_i^n A_i$ for $A_i$ compact subsets of $M$ with $\rho(A_i, A_j)=d, \forall i,j$, then \[\frac{1}{log(\omega(S)/d) } = \sum_{i=1}^n \frac{1}{log(\omega(A_i)/d)}\] 
\end{proposition*}

\begin{itemize}
\item Put in an example here.
\item Also talk about how cosets and open balls coincide and when the above is satisfied 
\end{itemize}

\begin{corollary*}
	Suppose $S = \cup_i^n S_i$ with $\rho(S_i, S_j)=d=diam(S)$ and also $\omega(S_i)=\omega(S_j)$, $\forall i,j$ .  Let $r \in \mathbb{R}$ be such that $\omega(S_i)=r\omega(S)$, $\forall i$. Then $\omega(S) = r^{\frac{1}{n-1}}\cdot d$. In particular if $S = \mathbb{Z}$ and $(M,\rho)= (\mathbb{Z}, \mid \cdot\mid_p)$ then $\omega(S)=(\frac{1}{p})^{1/p-1}$ for any prime $p$. 
\end{corollary*}

\begin{corollary*}
	(Joins of computable sets are computable) Let  $\Gamma_M = \{\gamma_0, \gamma_1,\ldots, \gamma_\infty=0\}$ be the set of distances in $M$. Suppose that $S = B_{\gamma_i}(x)$,  for some $x$ and $i$, is the union of $2$ or more balls of radius $\gamma_{i+1}$, i.e., $S=\cup_{j=1}^n B_{\gamma_{i+1}} (x_j)$ is a join in the lattice of open sets in $M$, then 
	\[\frac{1}{log(\omega(S)/\gamma_{i+1} )} = \sum_{j=1}^n \frac{1}{log(\omega(B_{\gamma_{i+1}}(x_j))/\gamma_{i+1} )}\]
\end{corollary*}

Under what class of maps is valuative capacity invariant?
\begin{definition*}
Let $X$ and $Y$ be topological spaces and suppose $f: X \rightarrow Y$ is a bijection with inverse function $f^{-1}: Y \rightarrow X$. Then $f$ is a \textbf{homeomorphism} so long as $f$ and $f^{-1}$ are continuous.
\end{definition*}

\begin{definition*}
Let $X$ and $Y$ be topological spaces and suppose $f: X \rightarrow Y$ is injective and continuous. Let $Z =f(X) \subseteq Y$ be the image of $f$ in $Y$. If $f': X \rightarrow Z$ is a homeomorphism, then we say that $f$ is an \textbf{topological imbedding} of $X$ in $Y$.
\end{definition*}

\begin{proposition*} (Munkres 18.4)
Let $A$, $X$ and $Y$ be topological spaces and suppose $f: A \rightarrow X \times Y$  is given by $f(a) = (f_1(a), f_2(a))$, where $f_1:A \rightarrow X$ and $f_2:A \rightarrow Y$. Then $f$ is continuous if and only if both $f_1$ and $f_2$ are.  
\end{proposition*}


\newpage
\section*{Computing a $\rho$-ordering}
We describe an algorithm for computing the $\rho$-ordering of a set recursively and discuss some immediate corollaries.  \\

Let $S \subseteq M$ be a compact subset of an ultrametric space $(M, \rho)$. Let $\Gamma_S =\{\gamma_0, \gamma_1,\ldots,\gamma_\infty=0\}$ be the set of distances in $S$.  Note that for each $k \in \mathbb{N}$, the closed balls of radius $\gamma_k$ partition $S$, i.e., $S=S_{\gamma_k} := \cup_{i=1}^n \overline{B_{\gamma_k}(x_i)}$, where both $n$ and the $x_i$'s depend on $k$. In what follows, fix a $k \in \mathbb{N}$ and let $S_{\gamma_k} = \cup_{i=1}^n \overline{B_{\gamma_k}(x_i)}$ be such a partition. Note that we can construct $S_{\gamma_{k+1}}$ by partitioning each of the $\overline{B_{\gamma_k}(x_i)}$ , i.e., \[S = S_{\gamma_{k+1}} = \cup_{i=1}^n \cup_{j=1}^{l_i} \overline{B_{\gamma_k}(x_{i,j})}\] where $1 \leq l_i \leq n$ and $\cup_{j=1}^{l_i} \overline{B_{\gamma_k}(x_{i,j})}=\overline{B_{\gamma_k}(x_i)}$, $\forall i$. We denote by $x_{i,j}$ the centre of a ball of radius $\gamma_{k+1}$ partitioning the ball $B_{\gamma_k}(x_i)$. Without loss of generality, when $j=1$, assume $x_{i,j}=x_i$, $\forall i$.\\

We now make the following observation due to \cite{na},

\begin{lemma*}
For each $k$, the elements of $S_{\gamma_k}$, that is, the closed balls of radius $\gamma_k$, themselves form an ultrametric space, where 
\[ \rho_k\overline{(B_{\gamma_k}(x)},\overline{B_{\gamma_k}(y)}) = 
\begin{cases}
\rho(x,y), & \text{if } \rho(x,y) > \gamma_k \\
0, & \text{if }   \rho(x,y) \leq \gamma_k \text{, i.e., } \overline{B_{\gamma_k}(x)}=\overline{B_{\gamma_k}(y)}
\end{cases}
\]
\end{lemma*}

We note that since $S$ is assumed to be compact,  $S_{\gamma_k}$ is a finite metric space $\forall k < \infty$ and $S_{\gamma_\infty}=\cup_{x \in S}\overline{B_0(x)} = \cup_{x \in S}x=S$ and $\rho_\infty=\rho$.  Now view $S_{\gamma_k}$, for fixed $k < \infty$ as a finite ultrametric space and represent its $n < \infty$ elements by their centres, the $x_i$'s. Without loss of genearlity, we can reindex the $x_i$'s so that they give the first $n$ terms of a $\rho_k$-ordering of $S_{\gamma_k}$. The following proposition is the main result of this section.

\begin{proposition*}
Given $S$ a compact subset of an ultrametric space $M$ and $\Gamma_S$, the set of distances in $S$, if $S_{\gamma_k}$ is a partition of $S$ as described above for $\gamma_k \in \Gamma_S$ with $k < \infty$, where the centres of the balls are indexed according to a $\rho_k$-ordering of $S_{\gamma_k}$, then a $\rho_{k+1}$-ordering of $S_{\gamma_{k+1}}$ can be found by forming a matrix, $A_k$, whose $(i,j)^{th}$-entry is $x_{i,j}$, as shown below, and then concatenating the rows (where the columns are padded by * if necessary). 
\end{proposition*}

\[A_k=
 \begin{pmatrix}
  x_{1,1} & x_{2,1} & \ldots  &x_{n,1} \\
  x_{1,2} & x_{2,2} &\ldots &x_{n,2} \\
  \vdots & \vdots & \ddots & \vdots \\
  x_{1,l_1} & x_{2,l_2} & \ldots &x_{n,l_n}
 \end{pmatrix}
\]


\begin{proof}
Note that the entries in each column are points in the ball $B_{\gamma_k}(x_i)$ so that the pairwise distance between columns is constant and always exceeds the distance between elements within a column. Moreover, the columns are organized such that for any $j$, $x_{n,j}$ maximizes$\prod_{i=1}^{n-1} \rho_(x_{n,j},x_{i,j})$ since $\prod_{i=1}^{n-1} \rho_(x_{n,j},x_{i,j}) = \prod_{i=1}^{n-1} \rho_(x_{n,1},x_{i,1}) = \prod_{i=1}^{n-1} \rho_(x_{n},x_{i})$ and the $x_i$'s are indexed according a $\rho_k$-ordering of $S_{\gamma_k}$.\\

Then a $\rho_{\gamma_{k+1}}$-ordering of $S_{\gamma_{k+1}}$ is obtained by minimizing the number of elements from any one column and by taking the points $x_{i,j}$ (for fixed $j$) in sequence. For example, by concatenating the rows.
\end{proof}

\begin{corollary*}
Interweaving the bottown row of the lattice of closed balls for a set $S$ gives a $\rho$-ordering of $S$. 
\end{corollary*}

\begin{corollary*}
Suppose $S$ and $T$ are compact subsets of an ultrametric space $M$ with $\Gamma_S = \Gamma_T$ and $\mid S_{\gamma_k}\mid =\mid T_{\gamma_k}\mid$, $\forall k$. Then $\omega(S) = \omega(T)$. 
\end{corollary*}
\begin{itemize}
\item i think this coincides with translation invariance when there is a group operation
\end{itemize}

\begin{corollary*}
(regularity) Suppose that $S$ is such that $\forall k$, any $B_{\gamma_k}(x)=\cup_{j=1}^l B_{\gamma_{k+1}}(x_j)$, that is, every ball in $S$ breaks into exactly $l$ smaller balls. 
\end{corollary*}
