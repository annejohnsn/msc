%\section{Ultrametric basics}

The principal context for this thesis is an arbitrary ultrametric space, which is a metric space that also satisifies an additional axion, sometimes called the ultrametric inequality or (in the case of vector spaces) the strong triangle propery. We define  ultrametric spaces below and for the rest of this section, we review some of their more important characteristics. The proofs offered in this section are, for the most part, standard and can be found in a number of reference texts, such as \cite{ar}.\\

\begin{definition}
	 Let $(M, \rho)$ be a metric space; that is, suppose $M$ is a set and $\rho: M \times M \rightarrow \mathbb{R}_{\geq 0}$ is such that:
	\begin{enumerate}[(i)]
		\item $\rho(x,y) = 0$ if and only if $x=y$
		\item $\rho(x,y) = \rho(y,x)$
		\item $\rho(x,z) \leq \rho(x,y) + \rho(y,z)$
	\end{enumerate}
	for any $x,y,z \in M$. If $\rho$ satistifies the ultrametric inequality,	
		\[ \rho(x,z) \leq \max{(\rho(x,y), \rho(y,z))}\]
for any $x,y,z \in M$, then $(M, \rho)$ is an \textbf{ultrametric space}.
\end{definition}

A special case of an ultrametric space, and one where much of the previous work on this topic has been completed, is one where the metric has been derived from a norm on a vector space. \\

\begin{definition}
	 Let $(V, N)$ be a normed vector space; that is, suppose $V$ is $\mathbb{F-}$vector space, for $\mathbb{F}$ some subfield of $\mathbb{C}$, and $N: V \rightarrow \mathbb{R}_{\geq 0}$  is such that:
	\begin{enumerate}[(i)]
		\item $N(x +y ) \leq N(x) + N(y)$
		\item $N(cx) = \lvert c \rvert \text{ } N(X)$
		\item $N(x) = 0$ implies $x=0$
	\end{enumerate}
	for any $x,y \in V$ and $c \in \mathbb{F}$. We say that $N$ satisfies the \textbf{strong trianlge inequality} if
	\[ N(x + y) \leq \max(N(x), N(y)) \]
	for any $x,y \in V$.
\end{definition}

\begin{proposition}
	Let $(V,N)$ be a normed vector space and suppose $N$ satisfies the strong triangle inequality. Then the metric space, $(V,\rho_N)$, where $\rho_N$ is the metric induced by $N$, that is, $\rho_N(x,y) = N(x-y)$, is an ultrametric space.
\end{proposition}

\begin{proof}
We take for granted that  $(V,\rho_N)$ is a metric space and also note that 
\[N(x + z) \leq \max(N(x), N(z))\]
 implies  
\[\rho_N(x,z) \leq \max(\rho_N(x,0), \rho_N(z,0)) \leq \max(\rho_N(x,y), \rho_N(y,z))\]
\end{proof}

\begin{notation*}
 If $(V, N)$ is a normed vector space, then the metric induced by $N$ is denoted $\rho_N$.
\end{notation*}

Ultrametric spaces exhibit properties much unlike traditional metric spaces, and we review of few of these below. Of particular interest to us is the behavior between (closed) balls in an ultrametric space.

\begin{notation*}
	Let $(M, \rho)$ be a compact ultrametric space and let \[B(a, r)=\{x \in M \mid \rho(x,a) \leq r\}\] denote the \textit{closed} ball of radius $r$, centred at $a$ for some $r \in \mathbb{R}_{\geq 0}$ and $a \in (M,\rho)$.
\end{notation*} 
In the above notation, we break from  convention in that we denote a closed ball without using any decoration and by omitting any notation for an open ball. This because, for the most part, the notion of open and closed ball in an ultrametric space overlap, although we will need a few more facts before showing this.

\begin{definition}
Let $S$ be a subset of an ultrametric space. The \textbf{diameter of $S$} is $diam(S) = \max\limits_{x,y\in S}\rho(x,y)$. 
\end{definition}

\begin{proposition}
	Let $B(a, r)$ be a (closed) ball in an ultrametric space $(M,\rho)$. Then the diameter of $B$ is less than or equal to the radius of $B$.    
\end{proposition}

\begin{proof}
Suppose $d = diam(B)$. If $d > r$, this would imply there exists $x,y$ in $B(a,r)$ such that $\rho(x,y) > r$, but this would mean $\rho(x,y)$ is strictly greater than $\max(\rho(x,a), \rho(y,a))$, which is a contradiction since $\rho$ is an ultrametric.
\end{proof}

\begin{proposition}
	 All triangles in an ultrametric space $(M,\rho)$ are either equilateral or isosceles, with at most one short side. 
\end{proposition}


\begin{proposition}
	If $(M, \rho)$ is an ultrametric space and $B_{r_1}(x_0)$ and $B_{r_2}(y_0)$ are balls in $(M, \rho)$, then either $B_{r_1}(x_0) \cap B_{r_2}(y_0) = \emptyset$, $B_{r_1}(x_0) \subseteq B_{r_2}(y_0)$, or $B_{r_2}(x_0) \subseteq B_{r_1}(x_0)$. That is, in an ultrametric space, all balls are either comparable or disjoint.
\end{proposition}

\begin{proposition}
 The distance between any two distinct balls in an ultrametric is constant. That is, if $B(x_0, r_1)$ and $B(y_0, r_2)$ are two balls in an ultrametric space with $B(x_0, r_1) \cap B(y_0, r_2) = \emptyset$, then there exists a $c \in \mathbb{R}_{\geq 0}$ such that  $\rho(x,y)=c$, $\forall x \in B(x_0, r_1)$ and $\forall y \in B(y_0, r_2)$.
\end{proposition}

\begin{proof}
Suppose $\rho(x_0, y_0)=c$ and let $x \in B(x_0, r_1)$ and $y \in B(y_0, r_2)$ be arbitrary. Consider the triangle formed by $(x_0, y_0,y)$. Since $\rho(x_0,y_0)=c$ and  $\rho(y,y_0) \leq r_2 < c$, we must have $\rho(x_0, y)=c$ because triangles in an ultrametric space have at most one short side. Now consider the triangle formed by  $(x_0, x,y)$. Since $\rho(x_0, y)=c$ and  $\rho(x,x_0) \leq r_1 < c$, we must have $\rho(x, y)=c$.
\end{proof}

\begin{proposition}
 Every point of a ball in an ultrametric is at its centre. That is, if $B(x_0, r)$ is a ball in an ultrametric space $(M,\rho)$, then $B(x, r)=B(x_0, r)$,  $\forall x \in B(x_0, r)$
\end{proposition}

\begin{proof}
Let $a \in B(x, r)$. Then $\rho(a,x) \leq r$ and since \[\rho(a,x_0) \leq \max(\rho(a,x), \rho(x,x_0)) \leq r\] we must have $a \in B(x_0, r)$ and  $B(x, r) \subseteq B(x_0, r)$ A similar argument shows $B(x_0, r) \subseteq B(x, r)$.
\end{proof}


\begin{proposition}
Let $B(a, r)$ be a closed ball in an ultrametric space. Then there exists $ r' > r \in \mathbb{R}$ such that $B(a, r) = \{x \in M \mid \rho(x,a) < r'\} $; that is, every closed ball is also an open ball with the same centre and  slightly larger radius.
\end{proposition}

The following proposition is  easy to see, although the result is both unintuitive and  rather important for our purposes. 

\begin{proposition}
Suppose $S$ is a compact subset of an ultrametric space $(M, \rho)$ and that $\cup_{i \in I} B(x_i,r_i)$ is a cover of $S$ by (closed) balls in $S$. Then there exists $i_1,\ldots, i_n$, a finite subset of $I$, such that  $\cup_{j=1}^{j=n} B(x_{i_j},r_{i_j})$ is a partition of $S$.
\end{proposition}

\begin{proof}
Since $S$ is compact, $\cup_{i \in I} B(x_i,r_i)$ contains a finite subcover of $S$. Say this subcover is given by the elements  $i_1,\ldots, i_{n'}$, and suppose this is not a partition. That is, suppose for some $i_i, i_j$, $ B(x_{i_i},r_{i_i}) \cap  B(x_{i_j},r_{i_j}) \neq \emptyset$. Then, without loss of generality, we must have $ B(x_{i_i},r_{i_i}) \subseteq  B(x_{i_j},r_{i_j})$, so that the removal of $ B(x_{i_i},r_{i_i})$ is still a cover of $S$. We continue this process a finite number of times, since the subcover was finite to begin with, to arrive at a partition of $S$.
\end{proof}

In fact, a slightly stronger statement then the above is true:

\begin{corollary}
Suppose $S$ is a compact subset of an ultrametric space $(M, \rho)$ and that $B(x_0,r)$ is a (closed) ball in $S$. Then, there exists a finite partition of $S$ having $B(x_0,r)$ as an element.
\end{corollary}

\begin{proof}
Let $\mathcal{C}$ be the cover of $S$ given by $\cup_{x\in S} B(x,r) \cap S$. From the proposition, we can select a finite subcover of $\mathcal{C}$ that is a partition of $S$. Suppose $B(y,r) \cap S$ is the element in this partition containing $x_0$. Then  since $B(y,r)$ and $B(x_0,r)$ are equal in $M$, $B(y,r) \cap S = B(x_0,r) \cap S = B(x_0,r)$.
\end{proof}

\begin{proposition}
\cite{ar} Let $S$ be a  group equipped with a (right) invariant ultrametric, $\rho$. If $B=B(0,r)$ is a (closed) ball centred at the neutral element of $S$, then $B$ is a subgroup of $S$.
\end{proposition}

\begin{proof}
Let $x,y \in B$. Then \[\rho(x-y,0) = \rho(x,y)  \leq \max(\rho(x,0), \rho(y,0)) \leq r,\]
so that $x-y \in B$.
\end{proof}

\begin{proposition}
\cite{ar} If $S$ is a compact subset of an ultrametric space and $\Gamma_S$ is the set of all distances occurring between points of $S$, then $\{\Gamma_S \setminus 0\}$ is a discrete subset of $\mathbb{R}^+$. In particular,  if $S$ is compact, then $\Gamma_S$ is countable.
\end{proposition}

\begin{proof}
If $S = \{a\}$, then $\{\Gamma_S \setminus 0\} = \emptyset$ and we are done. Suppose then $S$ has at least two points and let $\phi_a: S \setminus \{a\} \rightarrow \mathbb{R}^+$ be the function given by $x \mapsto \rho(x,a)$. Recall that all triangles in an ultrametric space are isosceles, so that  $\rho(x,y) < \rho(x,a)$ implies $\rho(x,a) = \rho(y,a)$.  Then $\phi_a$ is locally-constant for all $a$ $\ldots$ Then $Im(\phi_a)$ is discrete for all $a$ (this is all from \cite{ar}) and their union is equal to $\{\Gamma_S \setminus 0\}$.\\

We show the union of $Im(\phi_a)$ over $a \in S$ is still discrete.  Let $\mathcal{U} = \bigcup_{a \in S} Im(\phi_a)$. Let $p \in \mathcal{U}$ be arbitrary and consider the function $\epsilon \mapsto \lvert B(p,\epsilon) \cap \mathcal{U} \rvert$. Wts this always has finite image and the function is monotone decreasing.
\end{proof}

It will become useful to write the set of distances occuring in $S$ as a sequence, put in decreasing order. We use the following notation to represent such a sequence 

$$\Gamma_S = \{\gamma_0 = d =diam(S), \gamma_1, \gamma_2, \ldots, \gamma_\infty =0 \}$$

where $\gamma_i \in  \Gamma_S$ if and only if $\exists x,y \in S$ such that $\rho(x,y) = \gamma_i$ and  $\gamma_i < \gamma_j$ if and only if $i > j$. 


\newpage
\section*{$\rho$-orderings, $\rho$-sequences, and valuative capacity}

In what follows let $S$ be a compact subset of an ultrametric space $(M,\rho)$.

\begin{definition}
	\cite{kj} A \textbf{$\rho$-ordering} of $S$ is a sequence $\{a_i\}_{i=0}^\infty \subseteq S$ such that $\forall n > 0$, $a_n$ maximizes $\prod_{i=0}^{n-1} \rho(s,a_i)$ over $s \in S$. 
\end{definition}

\begin{example}
Suppose $S$ is a finite subset of $(\mathbb{Z}, \lvert \cdot \rvert_2)$, $S=\{0,2,8,3\}$. Then a $\rho-$ordering of $S$ starts (arbitrarily) with $a_0=0$ , which forces $a_1=3$, since $\rho(0,3)=1=diam(S)$. The sequence continues $a_2=2$ and $a_3=8$, but after this point the sequence becomes arbitrary because  $\prod_{i=0}^{n-1} \rho(s,a_i)$ will contain a $0$, given by the repeated term. Indeed, for any finite subset $S$ with $\lvert S \rvert = n$, the $\rho-$ordering of $S$ is arbitrary from the $n^{th}$ point on. 
\end{example}

\begin{definition}
	\cite{kj} The \textbf{$\rho$-sequence} of $S$ is the sequence whose $0^{th}$-term is $1$ and whose $n^{th}$ term, for $n >0$, is $\prod_{i=o}^{n-1} \rho(a_n,a_i)$.
\end{definition}

\begin{proposition}
	\cite{kj} The $\rho$-sequence of $S$ is well-defined so long as $S$ is compact and $\rho$ is an ultrametric. That is, the $\rho$-sequence of a compact subset of an ultrametric spaces does not depend on the choice of $\rho$-ordering of $S$.
\end{proposition}

\begin{definition}
	\cite{kj}  Let $\gamma(n)$ be the $\rho$-sequence of $S$. The \textbf{valuative capacity} of $S$ is \[\omega(S)
	:= \lim_{n\to\infty} \gamma(n)^{1/n}\]  
\end{definition}


\begin{proposition}
	\cite{kj} For $S$ and $\gamma(n)$ as above,  $\lim_{n\to\infty} \gamma(n)^{1/n} = r < \infty$. 
\end{proposition}


\begin{proposition}
	If $S \subseteq M$ is a finite subset of an ultrametric space, then $\omega(S) =0$.
\end{proposition}


\begin{proposition}
	(upper bound) If $diam(S) = d$, then $\omega(S) < d$.
\end{proposition}

\begin{proof}
	Since $d$ is the diameter of $S$, the $n^{th}$ term of the $\rho$-sequence of $S$ is bounded by $d^n$ and so $ \lim_{n\to\infty} \gamma(n)^{1/n}=d$ if and only if $\gamma(n)=d^n$, $\forall n$. This implies $\rho(a_n, a_i) = d$, $\forall n$ and $\forall i < n$, but then $\rho(a_i,a_j)=d$, $\forall i,j$, since the $\rho$-sequence is maximized at each $n$. This means $\omega(S) < d$ would imply that the cover of $S$, $\cup_{a_i} B_d(a_i)$ is in fact an infinite partition, contradicting the compactness of $S$. Then  $\omega(S)= \lim_{n\to\infty} \gamma(n)^{1/n}<d$. 
\end{proof}

This doesn't work because  $\cup_{a_i} B_d(a_i)$  could fail to be a cover -when does this happen


\begin{proposition}
	(translation invariance) If $(M, \rho)$ be a compact ultrametric space and s also a topological group for which $\rho$ is (left) invariant under the group operation, then $\omega$ is also (left)-invariant. That\ is, if $\rho(x,y)=\rho(gx,gy)$, $ \forall g,x,y \in M$, then $\omega(gS)=\omega(S)$, for $S \subseteq M$.	
\end{proposition}

\begin{proof}
	Let $\{a_i\}_{i=0}^\infty$ be a $\rho$-ordering for $S$. Then $\{ga_i\}_{i=0}^\infty$ is a $\rho$-ordering for $gS$. Then $$\omega(gS) = \lim_{n\to\infty} \gamma(n)^{1/n} =  \lim_{n\to\infty} [\prod_{i=0}^{n-1} \rho(ga_n,ga_i)]^{1/n} = \lim_{n\to\infty} [\prod_{i=0}^{n-1} \rho(a_n,a_i)]^{1/n}	 = \omega(S)$$
\end{proof}	

\begin{example}
	With the notation of the previous section, note that for $x,y \in (\mathbb{Z}_p, \mid \cdot \mid_p)$, $\rho_p(x,y) = \mid x - y \mid_p = p^{-\nu_p(x-y)} = p^{-\nu_p((a+x)-(a+y))} =  \mid (a+x) - (a+y) \mid_p = \rho_p(a+x,a+y)$ so that $\omega(a+S) = \omega(S)$ for $S \subseteq (\mathbb{Z}_p, \mid \cdot \mid_p)$.
\end{example}

\begin{proposition}
	Let $(V, N)$ be a normed vector space and suppose $N$ satisfies the strong triangle identity. Then if $N$ is multiplicative, so is $\omega$. That is, if $N(gx)=N(g)N(x)$,$\forall g,x \in V$, then $\omega(gS) = N(g)  \omega(S)$, for $g \in V$ and $S \subseteq M$. 
\end{proposition}

\begin{proof}
	Let $\rho$ be the metric induced by $N$, so that $\rho(x,y) = N(x-y), \forall x,y \in V$. Let $\{a_i\}_{i=0}^\infty$ be a $\rho$-ordering for $S$. Then since $N$ is multiplicative, for $u, v \in gS$, $u=gs_i$ and $v=gs_j$ for some $s_i, s_j \in S$,  $$\rho(u, v) = \rho(gs_i, gs_j) =N(gs_i - gs_j) = N(g(s_i - s_j)) = N(g)N(s_i - s_j) = N(g)\rho(s_i,s_j).$$
	Then $\{ga_i\}_{i=0}^\infty$ is a $\rho$-ordering for $gS$ and 
	
	$$\omega(gS) = \lim_{n\to\infty} [\prod_{i=0}^{n-1} \rho(ga_n,ga_i)]^{1/n} 
	= \lim_{n\to\infty} [\prod_{i=0}^{n-1} N(g)\rho(a_n,a_i)]^{1/n} $$
	$$= \lim_{n\to\infty} [N(g)^n\prod_{i=0}^{n-1} \rho(a_n,a_i)]^{1/n} = N(g) \lim_{n\to\infty} [\prod_{i=0}^{n-1} \rho(a_n,a_i)]^{1/n} = N(g) \omega(S)$$
\end{proof}


\begin{example}
	Since $\mid \cdot \mid_p$ is multiplicative, $\omega(mS) = \mid m \mid_p  \omega(S)$ for $m \in \mathbb{Z}_p$ and $S \subseteq \mathbb{Z}$. In particular, $\omega(p\mathbb{Z}) = \mid p \mid_p \omega(\mathbb{Z}) = \frac{1}{p}\cdot p^{\frac{1}{1-p}} = p^{-p/p-1}.$
\end{example}

The following proposition is from \cite{kj}, where it is given for some $S$  written as the union of two subsets, although it is easily seen to be true for $S$ equal to any finite union, so long as the other assumptions remain satisfied.

\begin{proposition}
	\cite{kj}(subadditivity) If  $diam(S) := \max_{x,y \in S} \rho(x,y)=d$ and $S=\cup_i^n A_i$ for $A_i$ compact subsets of $M$ with $\rho(A_i, A_j)=d, \forall i,j$, then \[\frac{1}{log(\omega(S)/d) } = \sum_{i=1}^n \frac{1}{log(\omega(A_i)/d)}\] 
\end{proposition}


\begin{example}

\end{example}

\begin{itemize}
\item Also talk about when cosets and open balls coincide 
\end{itemize}

\begin{corollary}
	Suppose $S = \cup_i^n S_i$ with $\rho(S_i, S_j)=d=diam(S)$ and also $\omega(S_i)=\omega(S_j)$, $\forall i,j$ .  Let $r \in \mathbb{R}$ be such that $\omega(S_i)=r\omega(S)$, $\forall i$. Then $\omega(S) = r^{\frac{1}{n-1}}\cdot d$. In particular if $S = \mathbb{Z}$ and $(M,\rho)= (\mathbb{Z}, \mid \cdot\mid_p)$ then $\omega(S)=(\frac{1}{p})^{1/p-1}$ for any prime $p$. 
\end{corollary}

\begin{corollary}
	(Joins of computable sets are computable) Let  $\Gamma_M = \{\gamma_0, \gamma_1,\ldots, \gamma_\infty=0\}$ be the set of distances in $M$. Suppose that $S = B_{\gamma_i}(x)$,  for some $x$ and $i$, is the union of $2$ or more balls of radius $\gamma_{i+1}$, i.e., $S=\cup_{j=1}^n B_{\gamma_{i+1}} (x_j)$ is a join in the lattice of open sets in $M$, then 
	\[\frac{1}{log(\omega(S)/\gamma_{i+1} )} = \sum_{j=1}^n \frac{1}{log(\omega(B_{\gamma_{i+1}}(x_j))/\gamma_{i+1} )}\]
\end{corollary}

